<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>~/davi-canuto</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="terminal">
    <label for="lang"><span class="prompt">ğŸŒ</span></label>
    <select id="lang">
      <option value="en" selected>ğŸ‡ºğŸ‡¸ English</option>
      <option value="pt">ğŸ‡§ğŸ‡· PortuguÃªs</option>
    </select>
    <div id="output" class="output"></div>
    <div class="input-line">
      <span class="prompt">$</span>
      <input type="text" id="command" autocomplete="off" autofocus />
    </div>
  </div>

  <script>
    const fs = {
      en: {
        '/': ['about.txt', 'skills.txt', 'projects', 'contact.txt'],
        '/projects': ['school-api.txt', 'booking-system.txt'],
        'about.txt': "Hello! I'm Davi Canuto, a backend developer focused on REST APIs, Ruby on Rails, and testing.",
        'skills.txt': "Ruby, Rails, PostgreSQL, Docker, TDD, CI/CD",
        'contact.txt': "Email: davialessandro33@gmail.com\nLinkedIn: https://linkedin.com/in/davi-canuto-b10ab11b7",
        'projects/school-api.txt': "School API: RESTful API for managing school data. GitHub: https://github.com/seuusuario/api-escolar",
        'projects/booking-system.txt': "Booking System: Platform for resource reservations. GitHub: https://github.com/seuusuario/reservas"
      },
      pt: {
        '/': ['sobre.txt', 'habilidades.txt', 'projetos', 'contato.txt'],
        '/projetos': ['api-escolar.txt', 'sistema-reservas.txt'],
        'sobre.txt': "OlÃ¡! Eu sou Davi Canuto, desenvolvedor backend focado em APIs REST, Ruby on Rails e testes.",
        'habilidades.txt': "Ruby, Rails, PostgreSQL, Docker, TDD, CI/CD",
        'contato.txt': "Email: davialessandro33@gmail.com\nLinkedIn: https://linkedin.com/in/davi-canuto-b10ab11b7",
        'projetos/api-escolar.txt': "API Escolar: API RESTful para gerenciamento escolar. GitHub: https://github.com/seuusuario/api-escolar",
        'projetos/sistema-reservas.txt': "Sistema de Reservas: Plataforma de reservas de recursos. GitHub: https://github.com/seuusuario/reservas"
      }
    };

    let lang = 'en';
    let cwd = '/';

    const output = document.getElementById('output');
    const input = document.getElementById('command');
    const langSelect = document.getElementById('lang');

    function print(text = '') {
      output.innerHTML += text + '\n';
      output.scrollTop = output.scrollHeight;
    }

    function clear() {
      output.innerHTML = '';
    }

    function handleCommand(cmd) {
      const parts = cmd.trim().split(' ');
      const base = parts[0];
      const args = parts.slice(1);
      const currentFS = fs[lang];

      switch (base) {
        case 'ls':
          print((currentFS[cwd] || []).join('\n'));
          break;
        case 'cd':
          if (args.length === 0) {
            cwd = '/';
          } else {
            const target = cwd === '/' ? `/${args[0]}` : `${cwd}/${args[0]}`;
            if (currentFS[target]) {
              cwd = target;
            } else {
              if (lang === 'en') {
                print('No such directory');
              } else {
                print('DiretÃ³rio nÃ£o encontrado');
              }
            }
          }
          break;
        case 'cat':
          const path = cwd === '/' ? args[0] : `${cwd}/${args[0]}`;
          const content = currentFS[path];
          if (content) {
            print(content);
          } else {
            if (lang === 'en') {
              print('File not found');
            } else {
              print('Arquivo nÃ£o encontrado');
            }
          }
          break;
        case 'clear':
          clear();
          break;
        case 'help':
          if (lang === 'en') {
            print('Available commands: \nls\ncd >dir<\ncat >dir.txt<\nclear\nhelp');
          } else {
            print('Comandos disponÃ­veis: \nls\ncd dir.txt\ncat dir.txt\nclear\nhelp');
          }
            break;
        case 'show':
          const fullPaths = fs[lang]['/'];
          for (const item of fullPaths) {
            const fullPath = cwd === '/' ? item : `${cwd}/${item}`;
            const content = fs[lang][fullPath];
            if (Array.isArray(fs[lang][`/${item.replace('.txt', '')}`])) {
              // Se for uma "pasta" (ex: projects), mostrar o conteÃºdo
              const subdir = `/${item.replace('.txt', '')}`;
              print(`\nğŸ“ ${item}`);
              for (const subfile of fs[lang][subdir]) {
                const subpath = `${subdir}/${subfile}`;
                print(`\nğŸ“„ ${subfile}`);
                print(fs[lang][subpath]);
              }
            } else {
              // Se for um arquivo
              print(`\nğŸ“„ ${item}`);
              print(content);
            }
          }
          break;
        default:
          if (lang === 'en') {
            print('Command not found');
          } else {
            print('Comando nÃ£o encontrado');
          }
      }
    }

   document.addEventListener('keydown', function(event) {
    if (event.key === 'Enter') {
        const command = input.value;
        input.value = '';
        if (command) {
          print(`$ ${command}`);
          handleCommand(command);
        }
      }
    });

    langSelect.addEventListener('change', function () {
      lang = this.value;
      cwd = '/';
      clear();
      if (lang === 'en') {
        print('Language switched to English.');
      } else {
        print('Idioma alterado para PortuguÃªs.');
      }
    });

    print('Welcome to Davi Canuto\'s interactive terminal portfolio!');
    print('Type `help` to see available commands.');
    print('Type `show` to see all content at once.\n');
  </script>
</body>
</html>
